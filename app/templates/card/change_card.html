{% extends 'main/base.html' %}


{% block app_content %}
    <div class="d-flex justify-content-center">
        <form method="post" class="style-form shadow p-3 rounded">
            <h2>Change card</h2>
            {{ form.hidden_tag() }}
            <div class="form-group" onclick="exchange()">
                {{ form.kind(class="form-control") }}
                {% for error in form.kind.errors %}
                    <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.price(class="form-control", placeholder='Price') }}
                {% for error in form.price.errors %}
                    <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="form-group">
                <div class="form-row">
                    <div class="col">
                        {{ form.category_expenses.label }}
                        {{ form.category_expenses(class="form-control") }}
                        {% for error in form.category_expenses.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col">
                        {{ form.category_incomes.label }}
                        {{ form.category_incomes(class="form-control") }}
                        {% for error in form.category_incomes.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="form-row">
                    <div class="col">
                        {{ form.day(class='form-control', placeholder='day') }}
                        {% for error in form.day.errors %}
                    <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
                    </div>
                    <div class="col">
                        {{ form.month(class='form-control', placeholder='month') }}
                        {% for error in form.month.errors %}
                    <div class="invalid-feedback d-block">{{ error }}</div>
                {% endfor %}
                    </div>
                    <div class="col">
                        {{ form.year(class='form-control', placeholder='year') }}
                        {% for error in form.year.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="form-group">
                {{ form.note(class="form-control", placeholder='Note (optional)', maxlength="32") }}
            </div>
            {{ form.submit(class="dark-button w-100", value='Change') }}
        </form>
    </div>
{% endblock %}


{% block scripts %}
    <script>
        function exchange() {
            let e = document.getElementById('kind');
            let exp = document.getElementById('category_expenses');
            let inc = document.getElementById('category_incomes');
            if (e.value === '0') {
                inc.disabled = true;
                exp.disabled = false;
            } else {
                exp.disabled = true;
                inc.disabled = false;
            }
        }
        exchange();
    </script>
{% endblock %}